(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{F5kI:function(t,e,r){"use strict";r.r(e),r.d(e,"TermModule",(function(){return S}));var i=r("ofXK"),s=r("tyNb"),a=r("3Pt+"),o=r("mZHY"),n=r("fXoL"),b=r("5eHb"),c=r("iqHf"),d=r("CV0D");const m=["chart"];function l(t,e){1&t&&(n.Ob(0,"div",48),n.Ob(1,"div",49),n.Ob(2,"span",50),n.sc(3,"Loading..."),n.Nb(),n.Nb(),n.Nb())}function h(t,e){if(1&t&&(n.Ob(0,"div",51),n.Kb(1,"apx-chart",52),n.Nb()),2&t){const t=n.Yb();n.xb(1),n.cc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("xaxis",t.chartOptions.xaxis)("yaxis",t.chartOptions.yaxis)("stroke",t.chartOptions.stroke)}}function u(t,e){1&t&&(n.Ob(0,"p",53),n.sc(1," Please add some marks in a subject of the selected term to view this graph. "),n.Nb())}function p(t,e){1&t&&(n.Ob(0,"div",48),n.Ob(1,"div",49),n.Ob(2,"span",50),n.sc(3,"Loading..."),n.Nb(),n.Nb(),n.Nb())}function g(t,e){if(1&t){const t=n.Pb();n.Ob(0,"tr",58),n.Ob(1,"th",59),n.Ob(2,"span"),n.sc(3),n.Nb(),n.Nb(),n.Ob(4,"td",60),n.Ob(5,"span"),n.sc(6),n.Nb(),n.Nb(),n.Ob(7,"td",60),n.Ob(8,"span"),n.Ob(9,"button",61),n.Vb("click",(function(){n.kc(t);const r=e.$implicit;return n.Yb(2).opendelTermModal(r.term_id)})),n.Kb(10,"i",62),n.Nb(),n.Nb(),n.Ob(11,"span"),n.Ob(12,"button",63),n.Vb("click",(function(){n.kc(t);const r=e.$implicit;return n.Yb(2).openEditTermModel(r.term_id,r.term_name)})),n.sc(13," Edit "),n.Nb(),n.Nb(),n.Nb(),n.Nb()}if(2&t){const t=e.$implicit,r=e.index;n.ec("routerLink","/dash/term/",t.term_id,""),n.xb(3),n.tc(r+1),n.xb(3),n.tc(t.term_name)}}function f(t,e){if(1&t&&(n.Ob(0,"table",54),n.Ob(1,"thead"),n.Ob(2,"tr"),n.Ob(3,"th",55),n.Ob(4,"span"),n.sc(5,"#"),n.Nb(),n.Nb(),n.Ob(6,"th",56),n.Ob(7,"span"),n.sc(8,"Term Name"),n.Nb(),n.Nb(),n.Ob(9,"th",56),n.Kb(10,"span"),n.Nb(),n.Nb(),n.Nb(),n.Ob(11,"tbody"),n.rc(12,g,14,3,"tr",57),n.Nb(),n.Nb()),2&t){const t=n.Yb();n.xb(12),n.cc("ngForOf",t.termData)}}function O(t,e){1&t&&(n.Ob(0,"p",53),n.sc(1," Please enter a term to see the term in this list "),n.Nb())}function N(t,e){1&t&&(n.Ob(0,"div"),n.sc(1," Term Name is required "),n.Nb())}function v(t,e){1&t&&(n.Ob(0,"div"),n.sc(1," Term Name Cannot Contain Special Characters "),n.Nb())}function w(t,e){if(1&t&&(n.Ob(0,"div",64),n.rc(1,N,2,0,"div",65),n.rc(2,v,2,0,"div",65),n.Nb()),2&t){const t=n.Yb();n.xb(1),n.cc("ngIf",null==t.term_name_add.errors?null:t.term_name_add.errors.required),n.xb(1),n.cc("ngIf",null==t.term_name_add.errors?null:t.term_name_add.errors.noSpecial)}}function x(t,e){1&t&&(n.Ob(0,"div"),n.sc(1," Please enter a term "),n.Nb())}function _(t,e){1&t&&(n.Ob(0,"div"),n.sc(1," Term Name Cannot Contain Special Characters "),n.Nb())}function T(t,e){if(1&t&&(n.Ob(0,"small",66),n.rc(1,x,2,0,"div",65),n.rc(2,_,2,0,"div",65),n.Nb()),2&t){const t=n.Yb();n.xb(1),n.cc("ngIf",t.editTermForm.get("term_name").errors.required),n.xb(1),n.cc("ngIf",t.editTermForm.get("term_name").errors.noSpecial)}}const k=function(t){return{show:t}},y=[{path:"",component:(()=>{class t{constructor(t,e,r,i){this.toastr=t,this.termService=e,this.route=r,this.router=i,this.websiteList=["chemistry","english","computer","biology"],this.showEditTermModal=!1,this.deleteTermModal=!1,this.showTermModal=!1,this.series=[],this.subjects=[],this.paramLoaded=!1,this.term_name="",this.editTermForm=new a.e({term_name:new a.c("",[a.o.required,o.a.noSpecial])}),this.form=new a.e({term_name:new a.c("",[a.o.required,o.a.noSpecial])})}ngOnInit(){this.user_id=localStorage.getItem("user_id"),this.pwd=localStorage.getItem("pwd"),this.route.paramMap.subscribe(t=>{t.params.id&&(this.loadChart(t.params.id),this.paramLoaded=!0)}),this.loadTermData()}loadTermData(){this.termData=void 0,this.termService.getTermInfo(this.user_id,this.pwd).subscribe(t=>{202==t.code?(!this.paramLoaded&&t.response.length>0?this.router.navigate(["dash","term",t.response[0].term_id]):(this.chartOptions={},this.termMarks=[]),this.termData=t.response):this.toastr.error("Something went wrong!")})}loadChart(t){this.chartOptions=void 0,this.subjects=[],this.series=[],this.termService.getTermWiseSubject(this.user_id,this.pwd,t).subscribe(t=>{console.log(t),202==t.code?this.setupData(t):this.toastr.error("Something went wrong!")})}setupData(t){let e=t.exam;this.termMarks=t.marks,console.log(t),this.term_name=t.marks.length>0&&t.marks[0].length>0?t.marks[0][0].term_name:"",e.forEach(e=>{let r=e.full_marks;for(let i=0;i<e.exam_no;i++){let s=e.exam_name;e.exam_no>1&&(s+=" "+(i+1));let a=[];t.marks.forEach(t=>{let s=t.filter(t=>t.exam_id==e.exam_id&&i+1==t.exam_no),o=s.length>0?100*Number(s[0].marks)/r:0;a.push(o)}),this.series.push({name:s,data:a})}}),console.log(this.series),t.marks.forEach(t=>{t.length>0&&this.subjects.push(t[0].sub_name)}),console.log(this.subjects),this.loadAllSubjectCategory()}loadAllSubjectCategory(){this.chartOptions={series:this.series,chart:{type:"bar",height:430},plotOptions:{bar:{horizontal:!0,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:-6,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:1,colors:["#fff"]},xaxis:{categories:this.subjects},yaxis:{max:100}},setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100)}opendelTermModal(t){this.deleteTermModal=!0,this.term_id=t}openEditTermModel(t,e){this.showEditTermModal=!0,this.term_id=t,this.term_name=e,this.editTermForm.get("term_name").setValue(this.term_name),this.termService.getTermList(this.user_id,this.pwd).subscribe(t=>{202==t.code?this.termList=t.response:this.toastr.error("Something went wrong!")})}ondel(){this.deleteTermModal=!1,console.log(this.user_id),console.log(this.pwd),console.log(this.term_id),this.termService.delterm(parseInt(this.user_id),this.pwd,this.term_id).subscribe(t=>{202==t.code?(this.loadTermData(),this.toastr.warning("Term deleted successfully")):this.toastr.error("Something went wrong!")})}onEdit(){this.showEditTermModal=!1,this.termService.editterm(parseInt(this.user_id),this.pwd,this.term_id,this.editTermForm.value.term_name).subscribe(t=>{202==t.code?(this.toastr.success("Term updated successfully"),this.loadTermData()):this.toastr.error("Something went wrong!")})}get term_name_add(){return this.form.get("term_name")}onSubmit(t){this.form.valid&&(console.log(JSON.stringify(t)),this.showTermModal=!1,localStorage.getItem("user_id")&&(this.user_id=localStorage.getItem("user_id"),this.pwd=localStorage.getItem("pwd"),this.termService.addTerm(this.user_id,this.pwd,t).subscribe(t=>{(t.code=202)?(this.toastr.success("Term added successfully"),this.loadTermData()):this.toastr.error("Something went wrong!")})))}openTermModal(){this.showTermModal=!0}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(b.b),n.Jb(c.a),n.Jb(s.a),n.Jb(s.d))},t.\u0275cmp=n.Db({type:t,selectors:[["app-term"]],viewQuery:function(t,e){var r;1&t&&n.wc(m,!0),2&t&&n.hc(r=n.Wb())&&(e.chart=r.first)},decls:87,vars:22,consts:[[1,"container-fluid"],[1,"dash-title"],[1,"mb-5"],[1,"row"],[1,"col-xl-6"],[1,"card","spur-card"],[1,"card-header"],[1,"spur-card-icon"],[1,"fas","fa-chart-bar"],[1,"spur-card-title"],[1,"card-body"],["class","spinner text-center",4,"ngIf"],["id","chart",4,"ngIf"],["class","mt-4 lead",4,"ngIf"],[1,"col-xl-6","cardDetails"],[1,"card-header","bg-warning","text-white"],[1,"fas","fa-clipboard"],[1,"spur-card-menu"],[1,"btn","text-white",3,"click"],[1,"fas","fa-plus"],["class","table table-hover table-in-card",4,"ngIf"],["id","myModal",1,"modal",3,"ngClass"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"click"],[1,"modal-body"],[3,"formGroup","ngSubmit"],["userpost","ngForm"],[1,"form-group"],["for","exampleInputEmail1",1,"font-weight-bold"],["type","text","formControlName","term_name","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter Term",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"forms-group","text-center"],["type","submit",1,"btn","btn-primary","mr-3",3,"disabled"],["id","myModal","role","dialog",1,"modal","fade",3,"ngClass"],[1,"para"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"m-0"],["type","button","data-dismiss","modal",1,"close","btn","btn-danger",3,"click"],["for","exampleFormControlInput1"],["type","text","formControlName","term_name",1,"form-control"],["class","form-text text-danger font-weight-bold",4,"ngIf"],["type","submit","data-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["type","submit","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"spinner","text-center"],["role","status",1,"spinner-grow","text-secondary",2,"width","3rem","height","3rem"],[1,"sr-only"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","xaxis","yaxis","stroke"],[1,"mt-4","lead"],[1,"table","table-hover","table-in-card"],["scope","col",1,"text","rank-list"],["scope","col",1,"text"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"text","rank-list"],[1,"text"],["type","button","data-dismiss","modal",1,"btn","btn-danger","btn-sm","mr-1",3,"click"],[1,"fas","fa-minus"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"form-text","text-danger","font-weight-bold"]],template:function(t,e){if(1&t){const t=n.Pb();n.Ob(0,"div",0),n.Ob(1,"h1",1),n.sc(2,"Terms"),n.Nb(),n.Ob(3,"p",2),n.sc(4," Here you will find all the data related to your terms and see marks accouding to the selected term. "),n.Nb(),n.Ob(5,"div",3),n.Ob(6,"div",4),n.Ob(7,"div",5),n.Ob(8,"div",6),n.Ob(9,"div",7),n.Kb(10,"i",8),n.Nb(),n.Ob(11,"div",9),n.sc(12),n.Nb(),n.Nb(),n.Ob(13,"div",10),n.rc(14,l,4,0,"div",11),n.rc(15,h,2,7,"div",12),n.rc(16,u,2,0,"p",13),n.Nb(),n.Nb(),n.Nb(),n.Ob(17,"div",14),n.Ob(18,"div",5),n.Ob(19,"div",15),n.Ob(20,"div",7),n.Kb(21,"i",16),n.Nb(),n.Ob(22,"div",9),n.sc(23,"Term List"),n.Nb(),n.Ob(24,"div",17),n.Ob(25,"button",18),n.Vb("click",(function(){return e.openTermModal()})),n.Kb(26,"i",19),n.Nb(),n.Nb(),n.Nb(),n.Ob(27,"div",10),n.rc(28,p,4,0,"div",11),n.rc(29,f,13,1,"table",20),n.rc(30,O,2,0,"p",13),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(31,"div",21),n.Ob(32,"div",22),n.Ob(33,"div",23),n.Ob(34,"div",24),n.Ob(35,"h4",25),n.sc(36,"Add Term"),n.Nb(),n.Ob(37,"button",26),n.Vb("click",(function(){return e.showTermModal=!1})),n.sc(38," \xd7 "),n.Nb(),n.Nb(),n.Ob(39,"div",27),n.Ob(40,"form",28,29),n.Vb("ngSubmit",(function(){n.kc(t);const r=n.ic(41);return e.onSubmit(r.value)})),n.Ob(42,"div",30),n.Ob(43,"label",31),n.sc(44,"Term Name : "),n.Nb(),n.Kb(45,"input",32),n.rc(46,w,3,2,"div",33),n.Nb(),n.Ob(47,"div",34),n.Ob(48,"button",35),n.sc(49," Submit "),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(50,"div",36),n.Ob(51,"div",22),n.Ob(52,"div",23),n.Ob(53,"div",24),n.Ob(54,"h4",25),n.sc(55,"Delete Term"),n.Nb(),n.Ob(56,"button",26),n.Vb("click",(function(){return e.deleteTermModal=!1})),n.sc(57," \xd7 "),n.Nb(),n.Nb(),n.Ob(58,"div",27),n.Ob(59,"p",37),n.sc(60," Are you sure? This action will remove all subjects in this term as well as all marks related to this term. "),n.Nb(),n.Nb(),n.Ob(61,"div",38),n.Ob(62,"button",39),n.Vb("click",(function(){return e.ondel()})),n.sc(63," Yes! Delete "),n.Nb(),n.Ob(64,"button",40),n.Vb("click",(function(){return e.deleteTermModal=!1})),n.sc(65," Close "),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(66,"div",36),n.Ob(67,"div",22),n.Ob(68,"div",23),n.Ob(69,"form",28),n.Vb("ngSubmit",(function(){return e.onEdit()})),n.Ob(70,"div",24),n.Ob(71,"h5",41),n.sc(72,"Edit a Term"),n.Nb(),n.Ob(73,"button",42),n.Vb("click",(function(){return e.showEditTermModal=!1})),n.sc(74," \xd7 "),n.Nb(),n.Nb(),n.Ob(75,"div",27),n.Ob(76,"div",0),n.Ob(77,"div",30),n.Ob(78,"label",43),n.sc(79," New Term Name"),n.Nb(),n.Kb(80,"input",44),n.rc(81,T,3,2,"small",45),n.Nb(),n.Nb(),n.Nb(),n.Ob(82,"div",38),n.Ob(83,"button",46),n.sc(84," Save "),n.Nb(),n.Ob(85,"button",47),n.Vb("click",(function(){return e.showEditTermModal=!1})),n.sc(86," Close "),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()}2&t&&(n.xb(12),n.uc("Subject marks from ",e.term_name,""),n.xb(2),n.cc("ngIf",!e.chartOptions),n.xb(1),n.cc("ngIf",e.chartOptions&&e.termMarks&&e.termMarks.length>0),n.xb(1),n.cc("ngIf",e.chartOptions&&e.termMarks&&e.termMarks.length<=0),n.xb(12),n.cc("ngIf",!e.termData),n.xb(1),n.cc("ngIf",e.termData&&e.termData.length>0),n.xb(1),n.cc("ngIf",e.termData&&e.termData.length<=0),n.xb(1),n.cc("ngClass",n.gc(16,k,e.showTermModal)),n.xb(9),n.cc("formGroup",e.form),n.xb(6),n.cc("ngIf",e.term_name_add.touched&&!e.term_name_add.valid),n.xb(2),n.cc("disabled",!e.form.valid),n.xb(2),n.cc("ngClass",n.gc(18,k,e.deleteTermModal)),n.xb(16),n.cc("ngClass",n.gc(20,k,e.showEditTermModal)),n.xb(3),n.cc("formGroup",e.editTermForm),n.xb(12),n.cc("ngIf",e.editTermForm.get("term_name").touched&&e.editTermForm.get("term_name").invalid),n.xb(2),n.cc("disabled",!e.editTermForm.valid))},directives:[i.k,i.i,a.q,a.i,a.f,a.a,a.h,a.d,d.a,i.j,s.e],styles:[".container[_ngcontent-%COMP%]{position:relative}tbody[_ngcontent-%COMP%]{cursor:pointer}.modal.show[_ngcontent-%COMP%]{display:block}.para[_ngcontent-%COMP%]{font-size:120%;text-align:center}.form-control.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.table[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:0}.rank-list[_ngcontent-%COMP%]{width:35px}"]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[s.g.forChild(y)],s.g]}),t})(),S=(()=>{class t{}return t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({factory:function(e){return new(e||t)},imports:[[i.b,M,d.b,a.g,a.m]]}),t})()}}]);